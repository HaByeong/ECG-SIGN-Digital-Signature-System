# HC-06 블루투스 모듈 보드레이트 설정 가이드

## 문제점

기본 HC-06 모듈의 보드레이트는 **9600 baud**입니다. 이는 **500Hz 샘플링 레이트**에 충분하지 않아 ECG 신호가 불안정해질 수 있습니다.

### 계산
- **500Hz 샘플링** = 초당 500개 데이터
- 각 데이터: 3-4자리 숫자(3-4바이트) + 줄바꿈(2바이트) = **약 5-6바이트**
- **필요 대역폭**: 500 × 6 = **3000바이트/초**
- **9600 baud**: 초당 약 960바이트 (이론값, 실제로는 더 적음)
- **결론**: 블루투스가 데이터를 따라가지 못함!

## 해결 방법

HC-06 모듈의 보드레이트를 **57600 baud**로 증가시켜야 합니다.

## HC-06 보드레이트 변경 방법

### 방법 1: AT 명령어 사용 (권장)

1. **HC-06 모듈을 Arduino에 연결하지 않고 별도로 연결**
   - VCC → 5V (또는 3.3V, 모듈에 따라 다름)
   - GND → GND
   - TX → Arduino의 RX 핀 (예: 0번 핀)
   - RX → Arduino의 TX 핀 (예: 1번 핀)

2. **간단한 AT 명령 전송 코드 업로드**
   ```cpp
   void setup() {
     Serial.begin(9600);  // HC-06 기본 보드레이트
     Serial.println("AT+BAUD7");  // 57600으로 변경
     delay(1000);
   }
   
   void loop() {
     if (Serial.available()) {
       Serial.write(Serial.read());
     }
   }
   ```

3. **시리얼 모니터 열기**
   - 보드레이트: **9600**
   - **"NL & CR"** 선택
   - "AT+BAUD7" 입력 후 전송
   - 응답: "OK57600" 또는 "OK7" (모듈에 따라 다름)

4. **Arduino 재시작 후 보드레이트 확인**
   - 시리얼 모니터 보드레이트를 **57600**으로 변경
   - "AT" 입력 후 전송
   - "OK" 응답이 오면 성공

### 방법 2: 블루투스 AT 명령 앱 사용

1. **Android 앱 다운로드**
   - "Bluetooth Terminal" 또는 "HC-06 AT Command" 검색
   - 앱에서 HC-06 모듈과 페어링

2. **AT 명령 전송**
   - "AT+BAUD7" 입력
   - 응답 확인

### 방법 3: Arduino 코드에서 자동 설정 (고급)

코드에서 보드레이트를 자동으로 변경하려면, 먼저 9600으로 연결한 후 AT 명령을 보내고 재연결해야 합니다. 이는 복잡하므로 위의 방법 1을 권장합니다.

## 보드레이트 코드 참조

| 보드레이트 | AT 명령어 |
|------------|-----------|
| 9600 | AT+BAUD4 |
| 19200 | AT+BAUD5 |
| 38400 | AT+BAUD6 |
| **57600** | **AT+BAUD7** |
| 115200 | AT+BAUD8 |

## 확인 방법

1. **Arduino 코드 업로드** (57600 보드레이트로 설정)
2. **시리얼 모니터** 보드레이트를 **57600**으로 설정
3. **시리얼 모니터에서 데이터 확인**
   - 정상적으로 데이터가 표시되면 성공
   - 깨진 문자나 데이터가 안 보이면 보드레이트가 맞지 않는 것

## 주의사항

- HC-06 모듈의 일부 버전은 특정 보드레이트를 지원하지 않을 수 있습니다.
- 57600이 작동하지 않으면 **38400 (AT+BAUD6)**을 시도해보세요.
- 보드레이트를 변경한 후에는 **Arduino 코드의 `bluetooth.begin()` 값도 동일하게 변경**해야 합니다.

## 문제 해결

### 보드레이트 변경 후 연결이 안 될 때
1. Arduino 재시작
2. 블루투스 모듈 전원 재인가
3. Android 앱에서 블루투스 연결 해제 후 재연결

### 데이터가 여전히 불안정할 때
1. 블루투스 모듈과 Arduino의 거리를 가깝게 유지
2. 다른 블루투스 장치의 간섭 확인
3. 샘플링 레이트를 낮춤 (예: 250Hz)

